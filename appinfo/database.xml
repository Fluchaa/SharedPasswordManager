<?xml version="1.0"?>
<database>
    <name>spwm</name>
    <create>true</create>
    <overwrite>true</overwrite>
    <charset>utf8</charset>
    <table>
        <name>*dbprefix*spwm_userkey</name>
        <declaration>
            <field>
                <name>user_id</name> <!-- User ID -->
                <type>text</type>
                <notnull>true</notnull>
                <length>64</length>
            </field>
            <index>
                <name>spwm_userkey_pk</name>
                <field>
                    <name>user_id</name>
                </field>
            </index>
            <field>
                <name>unlockkey</name> <!-- Hash of Unlock PW -->
                <type>clob</type>
                <notnull>true</notnull>
            </field>
            <field>
                <name>privatekey</name> <!-- Private Key, Symetric Encrypted with unhashed Unlock PW -->
                <type>clob</type>
                <notnull>true</notnull>
            </field>
            <field>
                <name>publickey</name> <!-- Public Key -->
                <type>clob</type>
                <notnull>true</notnull>
            </field>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*spwm_group</name>
        <declaration>
            <field>
                <name>group_id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <autoincrement>1</autoincrement>
                <length>4</length>
            </field>
            <index>
                <name>spwm_group_pk</name>
                <field>
                    <name>group_id</name>
                </field>
            </index>
            <field>
                <name>name</name>
                <type>text</type>
                <notnull>true</notnull>
                <length>255</length>
            </field>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*spwm_groupuser</name>
        <declaration>
            <field>
                <name>group_id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <length>4</length>
            </field>
            <field>
                <name>user_id</name>
                <type>text</type>
                <notnull>true</notnull>
                <length>64</length>
            </field>
            <index>
                <name>spwm_groupuser_pk</name>
                <field>
                    <name>group_id</name>
                    <name>user_id</name>
                </field>
            </index>
            <field>
                <name>groupkey</name> <!-- Unlockkey for Item Password, encrypted with public key of user -->
                <type>clob</type>
                <notnull>true</notnull>
            </field>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*spwm_item</name>
        <declaration>
            <field>
                <name>item_id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <autoincrement>1</autoincrement>
                <length>4</length>
            </field>
            <index>
                <name>spwm_item_pk</name>
                <field>
                    <name>item_id</name>
                </field>
            </index>
            <field>
                <name>name</name>
                <type>text</type>
                <notnull>true</notnull>
                <length>255</length>
            </field>
            <field>
                <name>username</name>
                <type>text</type>
                <length>255</length>
            </field>
            <field>
                <name>email</name>
                <type>text</type>
                <length>255</length>
            </field>
            <field>
                <name>urlip</name>
                <type>text</type>
                <length>255</length>
            </field>
            <field>
                <name>description</name>
                <type>clob</type>
            </field>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*spwm_itempassword</name>
        <declaration>
            <field>
                <name>item_id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <length>4</length>
            </field>
            <field>
                <name>added</name>
                <type>timestamp</type>
                <notnull>true</notnull>
            </field>
            <index>
                <name>spwm_itempassword_pk</name>
                <field>
                    <name>item_id</name>
                    <name>added</name>
                </field>
            </index>
            <field>
                <name>key</name> <!-- Item Password, Symetric Encrypted with Group Key -->
                <type>clob</type>
                <notnull>true</notnull>
            </field>
            <field>
                <name>user_id</name>
                <type>text</type>
                <length>64</length>
                <notnull>true</notnull>
            </field>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*spwm_category</name>
        <declaration>
            <field>
                <name>category_id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <autoincrement>1</autoincrement>
                <length>4</length>
            </field>
            <index>
                <name>spwm_category_pk</name>
                <field>
                    <name>category_id</name>
                </field>
            </index>
            <field>
                <name>name</name>
                <type>text</type>
                <length>255</length>
                <notnull>true</notnull>
            </field>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*spwm_itemcategory</name>
        <declaration>
            <field>
                <name>category_id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <length>4</length>
            </field>
            <field>
                <name>item_id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <length>4</length>
            </field>
            <index>
                <name>spwm_itemcategory_pk</name>
                <field>
                    <name>category_id</name>
                    <name>item_id</name>
                </field>
            </index>
        </declaration>
    </table>       
</database>